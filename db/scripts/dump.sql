CREATE DATABASE IF NOT EXISTS AuctionDB;

CREATE TABLE IF NOT EXISTS `AuctionDB`.`USERS` (
`ID` BIGINT NOT NULL AUTO_INCREMENT,
`NAME` VARCHAR(255) NULL,
`PASSWORD` VARCHAR(255) NULL,
PRIMARY KEY (`ID`),
UNIQUE KEY (`NAME`),
UNIQUE KEY (`PASSWORD`))
DEFAULT CHARACTER SET = utf8;

CREATE TABLE IF NOT EXISTS `AuctionDB`.`AUCTIONS` (
`ID` BIGINT NOT NULL AUTO_INCREMENT,
`TITLE` VARCHAR(255) NULL,
`DESCRIPTION` TEXT NULL,
`SELLER_USER_ID` BIGINT NULL,
`WINNER_USER_ID` BIGINT NULL,
`FINAL_PRICE` DOUBLE DEFAULT 0.0,
`IS_ACTIVE` BIT(1) DEFAULT TRUE,
`CREATED_AT` DATETIME DEFAULT CURRENT_TIMESTAMP,
`UPDATED_AT` DATETIME DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`ID`),
CONSTRAINT `SELLER_USER_ID` FOREIGN KEY `SELLER_USER_ID` (`ID`) REFERENCES `AuctionDB`.`USERS` (`ID`)
ON DELETE NO ACTION 
ON UPDATE NO ACTION,
CONSTRAINT `WINNER_USER_ID` FOREIGN KEY `WINNER_USER_ID` (`ID`) REFERENCES `AuctionDB`.`USERS` (`ID`)
ON DELETE NO ACTION
ON UPDATE NO ACTION)
DEFAULT CHARACTER SET = utf8;

ALTER TABLE `AuctionDB`.`AUCTIONS` ADD INDEX `TITLE` (`TITLE`);
ALTER TABLE `AuctionDB`.`AUCTIONS` ADD INDEX `SELLER_USER_ID` (`SELLER_USER_ID`);
ALTER TABLE `AuctionDB`.`AUCTIONS` ADD INDEX `WINNER_USER_ID` (`WINNER_USER_ID`);
ALTER TABLE `AuctionDB`.`AUCTIONS` ADD INDEX `IS_ACTIVE` (`IS_ACTIVE`);
ALTER TABLE `AuctionDB`.`AUCTIONS` ADD INDEX `CREATED_AT` (`CREATED_AT`);